(function(a){a.fn.spin=function(d,c){var b={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}};if(Spinner){return this.each(function(){var f=a(this),e=f.data();if(e.spinner){e.spinner.stop();delete e.spinner}if(d!==false){if(typeof d==="string"){if(d in b){d=b[d]}else{d={}}if(c){d.color=c}}e.spinner=new Spinner(a.extend({color:f.css("color")},d)).spin(this)}})}else{throw"Spinner class not available."}}})(jQuery);function loadedHosts(c,d,a){var b=$("#hosts");if(b.children().length==0){b.append('<div class="alert alert-error"><i class="icon-warning-sign"></i> Could not load list of hosts</div>')}updateUI()}function loadedOptions(c,d,a){var b=$("#options");if(b.children().length==0){b.append('<div class="alert alert-error"><i class="icon-warning-sign"></i> Could not load list of options</div>')}updateUI()}function loadedLeases(c,d,a){var b=$("#leases");if(b.children().length==0){b.append('<div class="alert alert-error"><i class="icon-warning-sign"></i> Could not load list of leases</div>')}updateUI()}window.onload=function(){$("#spinner-holder").spin("small","#fff");updateUI();$("#hosts").load("hosts.php",loadedHosts);$("#options").load("options.php",loadedOptions);$("#leases").load("leases.php",loadedLeases)};function editHost(c,a,b){$("#host_orig").val(c);$("#host_ipaddress").val(c);$("#host_macaddress").val(a);$("#host_save").attr("onclick","").unbind("click");$("#host_save").click(function(){saveHostEditor(b)});$("#host_editor").modal("show")}function addHost(){$("#host_orig").val("");$("#host_ipaddress").val("");$("#host_macaddress").val("");$("#host_save").attr("onclick","").unbind("click");$("#host_save").click(function(){saveHostEditor()});$("#host_editor").modal("show")}function addOption(){$("#option_ipfrom").val("0.0.0.0");$("#option_ipto").val("255.255.255.255");$("#option_option").val("");$("#option_save").attr("onclick","").unbind("click");$("#option_save").click(function(){saveOptionEditor()});$("#option_editor").modal("show")}function removeHost(b,a){$("#delete_msg").html("Deleting "+b);$("#host_delete").attr("onclick","").unbind("click");$("#host_delete").click(function(){reallyRemoveHost(b,a)});$("#host_confirmation").modal("show")}function reallyRemoveHost(c,a){$("#host_confirmation").modal("hide");var b={ipaddress:c};$.post("removehost.php",b,function(e,d,f){if(f.status!=201){$(".notifications").notify({type:"error",fadeOut:{enabled:true,delay:10000},message:{text:e}}).show()}else{$(".notifications").notify({type:"success",fadeOut:{enabled:true,delay:10000},message:{text:"Host removed"}}).show();a.remove()}})}function removeOption(d,a,c,b){$("#option_delete_msg").html("Deleting "+d+" - "+a+" "+c);$("#option_delete").attr("onclick","").unbind("click");$("#option_delete").click(function(){reallyRemoveOption(d,a,c,b)});$("#option_confirmation").modal("show")}function reallyRemoveOption(e,a,c,b){$("#option_confirmation").modal("hide");var d={ipfrom:e,ipto:a,option:c};$.post("removeoption.php",d,function(g,f,h){if(h.status!=201){$(".notifications").notify({type:"error",fadeOut:{enabled:true,delay:10000},message:{text:g}}).show()}else{$(".notifications").notify({type:"success",fadeOut:{enabled:true,delay:10000},message:{text:"Option removed"}}).show();b.remove()}})}function saveHostEditor(a){$("#host_editor").modal("hide");var b={original:$("#host_orig").val(),ipaddress:$("#host_ipaddress").val(),macaddress:$("#host_macaddress").val()};$.post("edithost.php",b,function(d,c,e){if(e.status!=201){$(".notifications").notify({type:"error",fadeOut:{enabled:true,delay:10000},message:{text:d}}).show()}else{if(a){$(".notifications").notify({type:"success",fadeOut:{enabled:true,delay:10000},message:{text:"Host edited"}}).show();$(a).replaceWith(d)}else{$(".notifications").notify({type:"success",fadeOut:{enabled:true,delay:10000},message:{text:"Host added"}}).show();$("#host_table").append(d)}}})}function saveOptionEditor(){$("#option_editor").modal("hide");var a={ipfrom:$("#option_ipfrom").val(),ipto:$("#option_ipto").val(),option:$("#option_option").val()};$.post("addoption.php",a,function(c,b,d){if(d.status!=201){$(".notifications").notify({type:"error",fadeOut:{enabled:true,delay:10000},message:{text:c}}).show()}else{$(".notifications").notify({type:"success",fadeOut:{enabled:true,delay:10000},message:{text:"Host added"}}).show();$("#option_table").append(c)}})}function updateUI(){$(".dnsname").tooltip();$(".prettydate").tooltip();var b=$("#hosts")[0];var a=$("#options")[0];var c=$("#leases")[0];if(b.children.length>0&&a.children.length>0&&c.children.length>0){$("#spinner-holder").data("spinner").stop()}};